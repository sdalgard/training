/**
 * File generated by the ThingML IDE
 * /!\Do not edit this file/!\
 * In case of a bug in the generated code,
 * please submit an issue on our GitHub
 **/

package org.thingml.generated;

import org.thingml.java.*;
import org.thingml.java.ext.*;

import org.thingml.generated.api.*;
import org.thingml.generated.messages.*;

import java.util.*;
public class Main {
//Things
public static PIFStarter PIFStarter_JavaPIF_starter;
public static JavaPrinter JavaPrinter_JavaPIF_printer;
public static PIFEnder PIFEnder_JavaPIF_ender;
public static TimerJava TimerJava_JavaPIF_timer;
public static void main(String args[]) {
//Things
JavaPrinter_JavaPIF_printer = (JavaPrinter) new JavaPrinter("JavaPIF_printer: JavaPrinter").buildBehavior();
TimerJava_JavaPIF_timer = (TimerJava) new TimerJava("JavaPIF_timer: TimerJava", (Thread)null).buildBehavior();
PIFStarter_JavaPIF_starter = (PIFStarter) new PIFStarter("JavaPIF_starter: PIFStarter", (short)5000).buildBehavior();
PIFEnder_JavaPIF_ender = (PIFEnder) new PIFEnder("JavaPIF_ender: PIFEnder", (short)0).buildBehavior();
//Connectors
new Connector(JavaPrinter_JavaPIF_printer.getPrint_port(), PIFStarter_JavaPIF_starter.getPrint_port(), JavaPrinter_JavaPIF_printer, PIFStarter_JavaPIF_starter);
new Connector(JavaPrinter_JavaPIF_printer.getPrint_port(), PIFEnder_JavaPIF_ender.getPrint_port(), JavaPrinter_JavaPIF_printer, PIFEnder_JavaPIF_ender);
new Connector(PIFStarter_JavaPIF_starter.getTimer_port(), TimerJava_JavaPIF_timer.getTimer_port(), PIFStarter_JavaPIF_starter, TimerJava_JavaPIF_timer);
//Starting Things
PIFEnder_JavaPIF_ender.init();
PIFStarter_JavaPIF_starter.init();
JavaPrinter_JavaPIF_printer.init();
TimerJava_JavaPIF_timer.init();
PIFStarter_JavaPIF_starter.start();
TimerJava_JavaPIF_timer.start();
PIFEnder_JavaPIF_ender.start();
JavaPrinter_JavaPIF_printer.start();
Runtime.getRuntime().addShutdownHook(new Thread() {
public void run() {
System.out.println("Terminating ThingML app...");PIFStarter_JavaPIF_starter.stop();
JavaPrinter_JavaPIF_printer.stop();
PIFEnder_JavaPIF_ender.stop();
TimerJava_JavaPIF_timer.stop();
System.out.println("ThingML app terminated. RIP!");}
});

}
}
