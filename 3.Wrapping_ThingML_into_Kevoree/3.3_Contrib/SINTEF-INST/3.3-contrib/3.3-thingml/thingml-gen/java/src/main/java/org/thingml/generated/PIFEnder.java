/**
 * File generated by the ThingML IDE
 * /!\Do not edit this file/!\
 * In case of a bug in the generated code,
 * please submit an issue on our GitHub
 **/

package org.thingml.generated;

import org.thingml.java.*;
import org.thingml.java.ext.*;

import org.thingml.generated.api.*;
import org.thingml.generated.messages.*;

import java.util.*;

/**
 * Definition for type : PIFEnder
 **/
public class PIFEnder extends Component implements IPIFEnder_from_starter {

private Collection<IPIFEnder_PrintClient> Print_clients = Collections.synchronizedCollection(new LinkedList<IPIFEnder_PrintClient>());
public synchronized void registerOnPrint(IPIFEnder_PrintClient client){
Print_clients.add(client);
}

public synchronized void unregisterFromPrint(IPIFEnder_PrintClient client){
Print_clients.remove(client);
}

@Override
public synchronized void pif_token_via_from_starter(short PrintIncForwardMsgs_pif_token_token__var){
receive(pif_tokenType.instantiate(from_starter_port, PrintIncForwardMsgs_pif_token_token__var), from_starter_port);
}

private void sendCustomPrintS_via_Print(String CustomPrintMsgs_customPrintS_myString__var){
//ThingML send
send(customPrintSType.instantiate(Print_port, CustomPrintMsgs_customPrintS_myString__var), Print_port);
//send to other clients
for(IPIFEnder_PrintClient client : Print_clients){
client.customPrintS_from_Print(CustomPrintMsgs_customPrintS_myString__var);
}}

private void sendCustomPrintI_via_Print(short CustomPrintMsgs_customPrintI_myInt__var){
//ThingML send
send(customPrintIType.instantiate(Print_port, CustomPrintMsgs_customPrintI_myInt__var), Print_port);
//send to other clients
for(IPIFEnder_PrintClient client : Print_clients){
client.customPrintI_from_Print(CustomPrintMsgs_customPrintI_myInt__var);
}}

private void sendCustomPrintSI_via_Print(String CustomPrintMsgs_customPrintSI_myString__var, short CustomPrintMsgs_customPrintSI_myInt__var){
//ThingML send
send(customPrintSIType.instantiate(Print_port, CustomPrintMsgs_customPrintSI_myString__var, CustomPrintMsgs_customPrintSI_myInt__var), Print_port);
//send to other clients
for(IPIFEnder_PrintClient client : Print_clients){
client.customPrintSI_from_Print(CustomPrintMsgs_customPrintSI_myString__var, CustomPrintMsgs_customPrintSI_myInt__var);
}}

private void sendCustomPrintSISI_via_Print(String CustomPrintMsgs_customPrintSISI_myString1__var, short CustomPrintMsgs_customPrintSISI_myInt1__var, String CustomPrintMsgs_customPrintSISI_myString2__var, short CustomPrintMsgs_customPrintSISI_myInt2__var){
//ThingML send
send(customPrintSISIType.instantiate(Print_port, CustomPrintMsgs_customPrintSISI_myString1__var, CustomPrintMsgs_customPrintSISI_myInt1__var, CustomPrintMsgs_customPrintSISI_myString2__var, CustomPrintMsgs_customPrintSISI_myInt2__var), Print_port);
//send to other clients
for(IPIFEnder_PrintClient client : Print_clients){
client.customPrintSISI_from_Print(CustomPrintMsgs_customPrintSISI_myString1__var, CustomPrintMsgs_customPrintSISI_myInt1__var, CustomPrintMsgs_customPrintSISI_myString2__var, CustomPrintMsgs_customPrintSISI_myInt2__var);
}}

//Attributes
private short PIFEnder_mynum__var;
//Ports
private Port from_starter_port;
private Port Print_port;
//Message types
protected final Pif_tokenMessageType pif_tokenType = new Pif_tokenMessageType();
public Pif_tokenMessageType getPif_tokenType(){
return pif_tokenType;
}

protected final CustomPrintSMessageType customPrintSType = new CustomPrintSMessageType();
public CustomPrintSMessageType getCustomPrintSType(){
return customPrintSType;
}

protected final CustomPrintIMessageType customPrintIType = new CustomPrintIMessageType();
public CustomPrintIMessageType getCustomPrintIType(){
return customPrintIType;
}

protected final CustomPrintSIMessageType customPrintSIType = new CustomPrintSIMessageType();
public CustomPrintSIMessageType getCustomPrintSIType(){
return customPrintSIType;
}

protected final CustomPrintSISIMessageType customPrintSISIType = new CustomPrintSISIMessageType();
public CustomPrintSISIMessageType getCustomPrintSISIType(){
return customPrintSISIType;
}

//Empty Constructor
public PIFEnder() {
super(2);
PIFEnder_mynum__var = 0;
}

//Constructor (all attributes)
public PIFEnder(String name, final short PIFEnder_mynum__var) {
super(name, 2);
this.PIFEnder_mynum__var = PIFEnder_mynum__var;
}

//Getters and Setters for non readonly/final attributes
public short getPIFEnder_mynum__var() {
return PIFEnder_mynum__var;
}

public void setPIFEnder_mynum__var(short PIFEnder_mynum__var) {
this.PIFEnder_mynum__var = PIFEnder_mynum__var;
}

//Getters for Ports
public Port getFrom_starter_port() {
return from_starter_port;
}
public Port getPrint_port() {
return Print_port;
}
private CompositeState buildPIFEnder_behavior(){
final List<AtomicState> states_PIFEnder_behavior = new ArrayList<AtomicState>();
final AtomicState state_PIFEnder_behavior_Init = new AtomicState("Init")
{
@Override
public void onEntry() {
}

};
states_PIFEnder_behavior.add(state_PIFEnder_behavior_Init);
final List<Region> regions_PIFEnder_behavior = new ArrayList<Region>();
final List<Handler> transitions_PIFEnder_behavior = new ArrayList<Handler>();
transitions_PIFEnder_behavior.add(new Transition("Handler_2969404",pif_tokenType, from_starter_port, state_PIFEnder_behavior_Init, state_PIFEnder_behavior_Init){
@Override
public void doExecute(final Event e) {
final Pif_tokenMessageType.Pif_tokenMessage ce = (Pif_tokenMessageType.Pif_tokenMessage) e;
sendCustomPrintSISI_via_Print((String) ("\nEnder:"), (short) (getPIFEnder_mynum__var()), (String) (" got token:"), (short) (ce.token));
}

});
final CompositeState state_PIFEnder_behavior = new CompositeState("behavior", states_PIFEnder_behavior, state_PIFEnder_behavior_Init, transitions_PIFEnder_behavior, regions_PIFEnder_behavior, false);
return state_PIFEnder_behavior;
}

public Component buildBehavior() {
//Init ports
final List<EventType> inEvents_from_starter = new ArrayList<EventType>();
final List<EventType> outEvents_from_starter = new ArrayList<EventType>();
inEvents_from_starter.add(pif_tokenType);
from_starter_port = new Port(PortType.REQUIRED, "from_starter", inEvents_from_starter, outEvents_from_starter, 0);
final List<EventType> inEvents_Print = new ArrayList<EventType>();
final List<EventType> outEvents_Print = new ArrayList<EventType>();
outEvents_Print.add(customPrintSType);
outEvents_Print.add(customPrintIType);
outEvents_Print.add(customPrintSIType);
outEvents_Print.add(customPrintSISIType);
Print_port = new Port(PortType.PROVIDED, "Print", inEvents_Print, outEvents_Print, 1);
//Init state machine
behavior = buildPIFEnder_behavior();
return this;
}

}
